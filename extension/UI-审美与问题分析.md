# T212 扩展界面：审美调研与问题分析

> 先构造审美、明确问题与改进方向，再动手改代码。本文档为调研与设计依据，不包含具体改代码步骤。

---

## 一、参考界面调研（10+ 来源）

### 1. VS Code 状态栏与扩展规范

- **来源**： [Status Bar | Visual Studio Code Extension API](https://code.visualstudio.com/api/ux-guidelines/status-bar)
- **要点**：
  - 状态栏**不要加自定义颜色**（Don't add custom colors）。
  - 左侧放「主要/全局」信息，右侧放「次要/情境」操作。
  - 文案要短，图标仅在必要时使用、且隐喻清晰。
  - 错误/警告类高亮才用系统提供的 warning/error 背景色，且慎用。
- **对我们的启示**：底部状态栏应**完全不用蓝色/强调色**，只用灰阶（前景/背景/边框），避免「底部变蓝」。

### 2. VS Code 深色主题状态栏配色

- **来源**： [How to change the VSCode Status Bar Color](https://vscode.one/status-bar-color/) 等
- **要点**： 用户常把默认蓝色状态栏改成灰色，例如 `statusBar.background: "#1A1A1A"`、`#212121`、`#282828`，与主界面同色系，仅用细边框或轻微深浅区分。
- **启示**： 状态栏背景应为**深灰**（与主背景一致或略深），**不要**使用蓝色或高饱和色。

### 3. Sublime Text 4 界面

- **来源**： Sublime 官方博客与文档
- **要点**： 极简标题栏与侧栏、GPU 渲染、不强调装饰；状态栏改进侧重「信息正确」而非炫色；主题支持自适应深色。
- **启示**： 整体克制，状态栏是「信息条」而非「强调区」。

### 4. Cursor / 现代 IDE 界面

- **来源**： Cursor 文档与主题迁移指南
- **要点**： 与 VS Code 同源，标题栏/标签栏/工具栏/状态栏使用**扁平色块**（title_bar.background、tab_bar.background、status_bar.background），无渐变、无大面积高饱和。
- **启示**： 编辑器风格 = 扁平 + 灰阶 + 少量语义色（仅用于代码/盈亏等语义）。

### 5. JetBrains IDE 状态栏（深色）

- **来源**： JetBrains Guide – Status Bar Customization、User interface themes
- **要点**： 深色主题下状态栏与整体一致，可通过 `StatusBar.borderColor` 等做**细微边框区分**，不抢眼。
- **启示**： 用**边框**和**轻微背景深浅**区分状态栏，不用彩色。

### 6. Neovim 极简状态行

- **来源**： "A boring statusline for Neovim"、mini.statusline
- **要点**： 强调「无亮色」、仅用配色方案中的中性色；信息仅在需要时显示。
- **启示**： 状态栏可「无聊」一点，不追求吸引眼球。

### 7. Zed 主题与状态栏

- **来源**： Zed 文档 Appearance、Theme Builder
- **要点**： 状态栏通过 `status_bar.background` 等覆盖，与主题统一；整体偏灰与背景协调。
- **启示**： 状态栏背景与主背景**同系**，不单独上蓝/绿。

### 8. Chrome 扩展 Popup 设计建议

- **来源**： Chrome Developers – Design the user interface、Building UIs for Extensions
- **要点**： 弹窗应**目的明确、尽量少元素**；紧凑尺寸（如 300–400px 宽）；一致内边距（如 16px）；轻量排版与系统字体。
- **启示**： 扩展界面要「像工具」而不是「像营销页」，减少视觉噪音。

### 9. macOS 深色模式与侧栏

- **来源**： Apple HIG – Supporting Dark Mode
- **要点**： 使用**语义色**（如 labelColor、secondaryLabelColor）和**自适应颜色**，避免硬编码亮色。
- **启示**： 状态栏文字应用「次要标签」级别的灰，而非高对比或彩色。

### 10. shadcn/ui 深色侧栏

- **来源**： shadcn Sidebar 文档
- **要点**： 深色侧栏用 `--sidebar-accent` 等做**极弱 hover**（如 15.9% 亮度），不刺眼。
- **启示**： 列表/链接 hover 用**极淡灰**，不用蓝色块。

### 11. VS Code 主题色参考（Gruvbox 等）

- **来源**： Theme color reference、Peacock 等
- **要点**： `statusBar.background` 与 `statusBar.border` 用同色系灰（如 #282828 + #3c3836），保证状态栏与主区**融合**。
- **启示**： 底部一条线用「同系深灰边框」即可，不需额外色块。

---

## 二、当前界面问题归纳

### 1. 「底部变蓝」、不专业

- **原因**：
  - 状态栏右侧链接使用了 `color: var(--text-primary)`，hover 时 `color: var(--accent)`（#7eb3f5）。
  - 用户感知为「底部一块变蓝」，与 VS Code / Sublime 等「状态栏不用自定义颜色」的规范冲突。
- **结论**： 状态栏内**禁止使用 accent（蓝）**，只允许灰阶（主灰、次灰、边框灰）。

### 2. 文字重复、信息噪音

- **可能来源**：
  - 状态栏左侧「最后更新」由 JS 写入 `lastUpdatedStatus`，若与某处 data-i18n 或占位文案重复，会显得重复。
  - 错误态时若同时有「操作频繁」和「X 秒后再试」两段相似文案，或同一信息出现在状态栏与内容区，都会造成重复感。
- **结论**： 任何一条信息只应有**单一展示位置**；状态栏只保留「最后更新」一处；错误/提示不重复出现在状态栏与主内容。

### 3. 状态栏视觉过重

- **原因**：
  - `background: rgba(0, 0, 0, 0.25)` 在深色底上形成一块「黑条」。
  - 链接有 padding、hover 有背景 + 变色，在狭小状态栏里过于抢眼。
- **结论**： 状态栏应**更贴近主背景**（同色或仅略深），用**一条细边框**与主内容区分即可；链接样式极简（无块状背景、无蓝色）。

### 4. 与「编辑器」风格仍有差距

- **表现**： 顶栏、内容区、状态栏的层次和用色仍未完全统一到「一块灰板」的编辑器感；状态栏像独立组件而非编辑器底部自然延伸。
- **结论**： 整块界面应视为**一个编辑器窗口**：同一背景体系、顶部分割线、底部分割线、无卡片式色块、无彩色底条。

---

## 三、改进原则（大改方向）

### 1. 状态栏

- **配色**： 与主背景同色或略深（如 #222 / #252526），**不用蓝、绿、红**。
- **边框**： 仅一条顶边框（如 1px solid #404040），与主区区分。
- **链接/操作**： 文字用次要灰（如 #a8a8a8），hover 时**仅略微变亮**（如 #c0c0c0），**不用 accent**；可考虑无背景、或极淡灰背景（如 rgba(255,255,255,0.04））。
- **信息**： 左侧仅「最后更新」一类信息，右侧仅必要入口（侧边栏/悬浮窗/选项），文案短、不重复。

### 2. 整体

- **背景**： 全窗口统一深灰体系（#222 / #252526），透明度只作用于整块，不单独给状态栏加色。
- **顶栏**： 与内容区同底，仅下边框区分；标题与刷新按钮不抢眼。
- **内容区**： 区块之间用细线或留白区分，不用卡片色块；section 标题用次要灰、不加大色块。
- **语义色**： 绿/红仅用于盈亏数字；蓝色仅用于主按钮或极少量「可点击」提示，**不用于状态栏**。

### 3. 文字与信息

- **单一来源**： 「最后更新」只由 JS 写入状态栏左侧，不在内容区再写一遍。
- **错误/提示**： 只在主内容区或固定提示区展示一次，状态栏不重复相同信息。
- **i18n**： 确保 data-i18n 与 JS 写入的文案不重叠（例如状态栏左侧为空 span，仅 JS 填时间戳文案）。

### 4. 参考风格一句话

- **VS Code**： 状态栏无自定义颜色、短文案、左右分区。
- **Sublime**： 极简、信息条不炫。
- **Zed / Cursor**： 扁平、灰阶、状态栏与主背景同系。

---

## 四、小结

- **问题**： 底部变蓝（状态栏用了 accent）、文字可能重复、状态栏过重、整体不够「一块编辑器」。
- **方向**： 状态栏全灰、仅细线区分、链接无蓝无块状背景；整窗同色系、信息单源、语义色仅用于数据与主按钮。
- **下一步**： 按上述原则大改 `shared.css`（状态栏与全局）、检查 popup/sidepanel/widget 的 DOM 与 JS，去掉重复展示与多余样式，使界面完全符合编辑器风格。
