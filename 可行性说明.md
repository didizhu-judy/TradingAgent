# Trading 212 谷歌插件 — 可行性说明

## 一、Trading 212 是否真的有 API？

**有，且是官方提供的。**

| 项目 | 说明 |
|------|------|
| **名称** | Trading 212 Public API (v0)，目前为 Beta |
| **文档** | https://docs.trading212.com/ |
| **适用账户** | 仅 **Invest（通用投资账户）** 和 **Stocks ISA**，CFD 等不适用 |
| **环境** | 实盘：`https://live.trading212.com/api/v0`<br>模拟：`https://demo.trading212.com/api/v0` |

文档里明确提供了账户、持仓、订单、历史等接口，我们插件只需要其中**只读**部分：账户摘要、持仓列表。

---

## 二、你怎么提供这个 API？（凭证从哪来、怎么填）

**凭证由你在 Trading 212 里生成，然后填到我们插件的设置里。**

1. **在 Trading 212 里生成密钥**
   - 打开 Trading 212 **App** 或 **网页** → **设置 (Settings)** → **API (Beta)**  
   - 先接受风险提示，然后点 **Generate API key**
   - 在权限里可以只勾选**只读**（例如：查看账户数据、持仓、历史），不勾选下单，更安全
   - 可选：限制 IP（只允许你家/公司 IP 使用该密钥）
   - 提交后会得到两样东西：
     - **API Key**（类似用户名）
     - **API Secret**（类似密码，**只显示一次**，务必保存好）

2. **在插件里填写**
   - 安装我们的 Chrome 扩展后，**右键扩展图标 → 选项**（或从扩展管理页进入选项）
   - 在选项页里填写：
     - API Key  
     - API Secret  
     - 环境：**Demo（模拟）** 或 **Live（实盘）**
   - 保存后，**只有你这台电脑上的插件**会使用这些信息，我们不会收到、也不存储你的密钥

官方说明（生成步骤）：  
https://helpcentre.trading212.com/hc/en-us/articles/14584770928157-Trading-212-API-key

---

## 三、插件怎么获取你的数据？（数据流、谁和谁通信）

**数据只在你电脑 ↔ Trading 212 之间流动，不经过我们的服务器。**

```
你的电脑（Chrome 扩展）  ──HTTPS──►  Trading 212 服务器
        ▲                              │
        │                              │ 校验 API Key + Secret
        │                              │ 返回你的账户/持仓 JSON
        └──────── 同一台电脑内 ─────────┘
```

- 扩展用你填的 **API Key + API Secret** 按照官方文档的方式（HTTP Basic 认证）发请求到  
  `live.trading212.com` 或 `demo.trading212.com`。
- Trading 212 校验通过后，**直接**把**你的**账户摘要、持仓等数据以 JSON 形式返回给**你的浏览器**。
- 数据不会发到我们或任何第三方；若你启用「本地代理」方案，请求也只是从浏览器发到你本机的 127.0.0.1，再由本机程序转发到 Trading 212，密钥仍只在你电脑上。

**若浏览器直连被 CORS 拦截**：我们会提供一个可选的「本地代理」小程序（你本机运行），浏览器只访问 `http://127.0.0.1:8765`，由该程序代为请求 Trading 212 并返回结果，密钥存在你本机，数据仍不离开你的电脑。

---

## 四、最终形态大概是什么样？

**形态：Chrome 浏览器扩展，点图标弹出小窗口。**

- **入口**：浏览器右上角扩展图标（例如名字叫「Trading 212 行情」）。
- **操作**：点击图标 → 弹出一个**小窗口（Popup）**。
- **小窗口里会看到**（第一版规划）：
  - **账户总览**：总资产、可用现金、投资市值、已实现盈亏、未实现盈亏（以及币种）。
  - **持仓列表**：每只股票/ETF 的名称、代码、数量、当前价、成本、未实现盈亏（金额和百分比）。
  - **刷新**：按钮手动刷新；可选自动每隔一段时间刷新（会遵守 API 频率限制）。
- **配置**：通过扩展的「选项」页配置 API Key、API Secret、Demo/Live、是否使用本地代理等，配置只存在你本机。

不做的事（第一版）：不下单、不改单、不代你操作账户，仅**只读查看**。

---

## 五、小结

| 问题 | 结论 |
|------|------|
| Trading 212 是否真的有 API？ | **有**，官方 Public API v0，文档完整。 |
| 你怎么提供 API？ | 在 Trading 212 **设置 → API (Beta)** 里生成 **API Key + API Secret**，在插件**选项页**里填写；可只开只读权限。 |
| 插件怎么获取你的数据？ | 插件用你填的密钥，**从你电脑**向 Trading 212 发 HTTPS 请求；数据**直接**从 Trading 212 到你浏览器，不经过我们；必要时可用本机代理绕过 CORS。 |
| 最终形态？ | **Chrome 扩展**：点图标 → 弹窗里看账户总览 + 持仓 + 收益，只读。 |

整体方案在技术和官方支持上都是可行的，可以按这个思路做 Chrome 插件。
